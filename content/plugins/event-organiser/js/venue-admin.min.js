/*! event-organiser 2.9.2 2014-10-31 11:49 */
var eo_venue=eo_venue||{marker:!1};jQuery(document).ready(function(a){postboxes.add_postbox_toggles(pagenow);var b=a("#eo_venue_Lat").val(),c=a("#eo_venue_Lng").val(),d=15;if(0===b&&0===c){var e=[];a(".eo_addressInput").each(function(){e.push(a(this).val())}),e.join("")||(d=1)}eovenue.init_map("venuemap",{lat:b,lng:c,zoom:d,draggable:!0,onDrag:function(b){this.dragging=!0;var c=b.latLng.lat().toFixed(6)+","+b.latLng.lng().toFixed(6);a("#eo-venue-latllng-text").text(c)},onDragend:function(){this.dragging=!1,this.setPosition(this.position)},onPositionchanged:function(){if(!this.dragging){var b=this.getPosition(),c=b.lat().toFixed(6)+","+b.lng().toFixed(6);a("#eo_venue_Lat").val(b.lat().toFixed(6)),a("#eo_venue_Lng").val(b.lng().toFixed(6)),a("#eo-venue-latllng-text").text(c),this.getMap().setCenter(b),this.getMap().setZoom(15)}}}),a(".eo_addressInput").change(function(){var b=[];a(".eo_addressInput").each(function(){b.push(a(this).val())}),eovenue.geocode(b.join(", "),function(a){a&&eovenue.get_map("venuemap").marker[0].setPosition(a)})}),a("#eo-venue-latllng-text").blur(function(){var b=a(this).text().trim().replace(/ /g,""),c=b.match(/^(-?[0-9]{1,3}\.[0-9]+),(-?[0-9]{1,3}\.[0-9]+)$/),d=a(this).data("eo-lat"),e=a(this).data("eo-lng");if(c){var f=c[1],g=c[2];if(f!=d||g!=e){a(this).data("eo-lat",f),a(this).data("eo-lng",g);var h=new google.maps.LatLng(f,g);eovenue.get_map("venuemap").marker[0].setPosition(h)}}else a(this).text(d+","+e)}),a("#eo-venue-latllng-text").keydown(function(b){13===b.which&&a(this).blur()})});